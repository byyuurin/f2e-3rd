var wt=Object.defineProperty;var P=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var D=(i,t,e)=>t in i?wt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,M=(i,t)=>{for(var e in t||(t={}))ft.call(t,e)&&D(i,e,t[e]);if(P)for(var e of P(t))lt.call(t,e)&&D(i,e,t[e]);return i};import{K as pt,N as At}from"./vendor.4a1ab756.js";const G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function _(i,t,e,n){let s,o,h;const w=t||[0],c=(e=e||0)>>>3,a=n===-1?3:0;for(s=0;s<i.length;s+=1)h=s+c,o=h>>>2,w.length<=o&&w.push(0),w[o]|=i[s]<<8*(a+n*(h%4));return{value:w,binLen:8*i.length+e}}function T(i,t,e){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(i){case"HEX":return function(n,s,o){return function(h,w,c,a){let p,f,u,N;if(h.length%2!=0)throw new Error("String of HEX type must be in byte increments");const A=w||[0],Y=(c=c||0)>>>3,m=a===-1?3:0;for(p=0;p<h.length;p+=2){if(f=parseInt(h.substr(p,2),16),isNaN(f))throw new Error("String of HEX type contains invalid characters");for(N=(p>>>1)+Y,u=N>>>2;A.length<=u;)A.push(0);A[u]|=f<<8*(m+a*(N%4))}return{value:A,binLen:4*h.length+c}}(n,s,o,e)};case"TEXT":return function(n,s,o){return function(h,w,c,a,p){let f,u,N,A,Y,m,d,L,g=0;const b=c||[0],v=(a=a||0)>>>3;if(w==="UTF8")for(d=p===-1?3:0,N=0;N<h.length;N+=1)for(f=h.charCodeAt(N),u=[],128>f?u.push(f):2048>f?(u.push(192|f>>>6),u.push(128|63&f)):55296>f||57344<=f?u.push(224|f>>>12,128|f>>>6&63,128|63&f):(N+=1,f=65536+((1023&f)<<10|1023&h.charCodeAt(N)),u.push(240|f>>>18,128|f>>>12&63,128|f>>>6&63,128|63&f)),A=0;A<u.length;A+=1){for(m=g+v,Y=m>>>2;b.length<=Y;)b.push(0);b[Y]|=u[A]<<8*(d+p*(m%4)),g+=1}else for(d=p===-1?2:0,L=w==="UTF16LE"&&p!==1||w!=="UTF16LE"&&p===1,N=0;N<h.length;N+=1){for(f=h.charCodeAt(N),L===!0&&(A=255&f,f=A<<8|f>>>8),m=g+v,Y=m>>>2;b.length<=Y;)b.push(0);b[Y]|=f<<8*(d+p*(m%4)),g+=2}return{value:b,binLen:8*g+a}}(n,t,s,o,e)};case"B64":return function(n,s,o){return function(h,w,c,a){let p,f,u,N,A,Y,m,d=0;const L=w||[0],g=(c=c||0)>>>3,b=a===-1?3:0,v=h.indexOf("=");if(h.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(h=h.replace(/=/g,""),v!==-1&&v<h.length)throw new Error("Invalid '=' found in base-64 string");for(f=0;f<h.length;f+=4){for(A=h.substr(f,4),N=0,u=0;u<A.length;u+=1)p=G.indexOf(A.charAt(u)),N|=p<<18-6*u;for(u=0;u<A.length-1;u+=1){for(m=d+g,Y=m>>>2;L.length<=Y;)L.push(0);L[Y]|=(N>>>16-8*u&255)<<8*(b+a*(m%4)),d+=1}}return{value:L,binLen:8*d+c}}(n,s,o,e)};case"BYTES":return function(n,s,o){return function(h,w,c,a){let p,f,u,N;const A=w||[0],Y=(c=c||0)>>>3,m=a===-1?3:0;for(f=0;f<h.length;f+=1)p=h.charCodeAt(f),N=f+Y,u=N>>>2,A.length<=u&&A.push(0),A[u]|=p<<8*(m+a*(N%4));return{value:A,binLen:8*h.length+c}}(n,s,o,e)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(n,s,o){return function(h,w,c,a){return _(new Uint8Array(h),w,c,a)}(n,s,o,e)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(n,s,o){return _(n,s,o,e)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function q(i,t,e,n){switch(i){case"HEX":return function(s){return function(o,h,w,c){let a,p,f="";const u=h/8,N=w===-1?3:0;for(a=0;a<u;a+=1)p=o[a>>>2]>>>8*(N+w*(a%4)),f+="0123456789abcdef".charAt(p>>>4&15)+"0123456789abcdef".charAt(15&p);return c.outputUpper?f.toUpperCase():f}(s,t,e,n)};case"B64":return function(s){return function(o,h,w,c){let a,p,f,u,N,A="";const Y=h/8,m=w===-1?3:0;for(a=0;a<Y;a+=3)for(u=a+1<Y?o[a+1>>>2]:0,N=a+2<Y?o[a+2>>>2]:0,f=(o[a>>>2]>>>8*(m+w*(a%4))&255)<<16|(u>>>8*(m+w*((a+1)%4))&255)<<8|N>>>8*(m+w*((a+2)%4))&255,p=0;p<4;p+=1)A+=8*a+6*p<=h?G.charAt(f>>>6*(3-p)&63):c.b64Pad;return A}(s,t,e,n)};case"BYTES":return function(s){return function(o,h,w){let c,a,p="";const f=h/8,u=w===-1?3:0;for(c=0;c<f;c+=1)a=o[c>>>2]>>>8*(u+w*(c%4))&255,p+=String.fromCharCode(a);return p}(s,t,e)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(s){return function(o,h,w){let c;const a=h/8,p=new ArrayBuffer(a),f=new Uint8Array(p),u=w===-1?3:0;for(c=0;c<a;c+=1)f[c]=o[c>>>2]>>>8*(u+w*(c%4))&255;return p}(s,t,e)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(s){return function(o,h,w){let c;const a=h/8,p=w===-1?3:0,f=new Uint8Array(a);for(c=0;c<a;c+=1)f[c]=o[c>>>2]>>>8*(p+w*(c%4))&255;return f}(s,t,e)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}const l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],R=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],S=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],k="Chosen SHA variant is not supported";function X(i,t){let e,n;const s=i.binLen>>>3,o=t.binLen>>>3,h=s<<3,w=4-s<<3;if(s%4!=0){for(e=0;e<o;e+=4)n=s+e>>>2,i.value[n]|=t.value[e>>>2]<<h,i.value.push(0),i.value[n+1]|=t.value[e>>>2]>>>w;return(i.value.length<<2)-4>=o+s&&i.value.pop(),{value:i.value,binLen:i.binLen+t.binLen}}return{value:i.value.concat(t.value),binLen:i.binLen+t.binLen}}function Q(i){const t={outputUpper:!1,b64Pad:"=",outputLen:-1},e=i||{},n="Output length must be a multiple of 8";if(t.outputUpper=e.outputUpper||!1,e.b64Pad&&(t.b64Pad=e.b64Pad),e.outputLen){if(e.outputLen%8!=0)throw new Error(n);t.outputLen=e.outputLen}else if(e.shakeLen){if(e.shakeLen%8!=0)throw new Error(n);t.outputLen=e.shakeLen}if(typeof t.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof t.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return t}function K(i,t,e,n){const s=i+" must include a value and format";if(!t){if(!n)throw new Error(s);return n}if(t.value===void 0||!t.format)throw new Error(s);return T(t.format,t.encoding||"UTF8",e)(t.value)}class ${constructor(t,e,n){const s=n||{};if(this.t=e,this.i=s.encoding||"UTF8",this.numRounds=s.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.s=t,this.o=[],this.h=0,this.u=!1,this.l=0,this.A=!1,this.H=[],this.S=[]}update(t){let e,n=0;const s=this.p>>>5,o=this.m(t,this.o,this.h),h=o.binLen,w=o.value,c=h>>>5;for(e=0;e<c;e+=s)n+this.p<=h&&(this.C=this.R(w.slice(e,e+s),this.C),n+=this.p);this.l+=n,this.o=w.slice(n>>>5),this.h=h%this.p,this.u=!0}getHash(t,e){let n,s,o=this.U;const h=Q(e);if(this.v){if(h.outputLen===-1)throw new Error("Output length must be specified in options");o=h.outputLen}const w=q(t,o,this.K,h);if(this.A&&this.T)return w(this.T(h));for(s=this.F(this.o.slice(),this.h,this.l,this.g(this.C),o),n=1;n<this.numRounds;n+=1)this.v&&o%32!=0&&(s[s.length-1]&=16777215>>>24-o%32),s=this.F(s,o,0,this.B(this.s),o);return w(s)}setHMACKey(t,e,n){if(!this.L)throw new Error("Variant does not support HMAC");if(this.u)throw new Error("Cannot set MAC key after calling update");const s=T(e,(n||{}).encoding||"UTF8",this.K);this.M(s(t))}M(t){const e=this.p>>>3,n=e/4-1;let s;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(e<t.binLen/8&&(t.value=this.F(t.value,t.binLen,0,this.B(this.s),this.U));t.value.length<=n;)t.value.push(0);for(s=0;s<=n;s+=1)this.H[s]=909522486^t.value[s],this.S[s]=1549556828^t.value[s];this.C=this.R(this.H,this.C),this.l=this.p,this.A=!0}getHMAC(t,e){const n=Q(e);return q(t,this.U,this.K,n)(this.k())}k(){let t;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");const e=this.F(this.o.slice(),this.h,this.l,this.g(this.C),this.U);return t=this.R(this.S,this.B(this.s)),t=this.F(e,this.U,this.p,t,this.U),t}}function y(i,t){return i<<t|i>>>32-t}function C(i,t){return i>>>t|i<<32-t}function J(i,t){return i>>>t}function V(i,t,e){return i^t^e}function W(i,t,e){return i&t^~i&e}function Z(i,t,e){return i&t^i&e^t&e}function Nt(i){return C(i,2)^C(i,13)^C(i,22)}function E(i,t){const e=(65535&i)+(65535&t);return(65535&(i>>>16)+(t>>>16)+(e>>>16))<<16|65535&e}function Yt(i,t,e,n){const s=(65535&i)+(65535&t)+(65535&e)+(65535&n);return(65535&(i>>>16)+(t>>>16)+(e>>>16)+(n>>>16)+(s>>>16))<<16|65535&s}function B(i,t,e,n,s){const o=(65535&i)+(65535&t)+(65535&e)+(65535&n)+(65535&s);return(65535&(i>>>16)+(t>>>16)+(e>>>16)+(n>>>16)+(s>>>16)+(o>>>16))<<16|65535&o}function mt(i){return C(i,7)^C(i,18)^J(i,3)}function dt(i){return C(i,6)^C(i,11)^C(i,25)}function gt(i){return[1732584193,4023233417,2562383102,271733878,3285377520]}function tt(i,t){let e,n,s,o,h,w,c;const a=[];for(e=t[0],n=t[1],s=t[2],o=t[3],h=t[4],c=0;c<80;c+=1)a[c]=c<16?i[c]:y(a[c-3]^a[c-8]^a[c-14]^a[c-16],1),w=c<20?B(y(e,5),W(n,s,o),h,1518500249,a[c]):c<40?B(y(e,5),V(n,s,o),h,1859775393,a[c]):c<60?B(y(e,5),Z(n,s,o),h,2400959708,a[c]):B(y(e,5),V(n,s,o),h,3395469782,a[c]),h=o,o=s,s=y(n,30),n=e,e=w;return t[0]=E(e,t[0]),t[1]=E(n,t[1]),t[2]=E(s,t[2]),t[3]=E(o,t[3]),t[4]=E(h,t[4]),t}function Et(i,t,e,n){let s;const o=15+(t+65>>>9<<4),h=t+e;for(;i.length<=o;)i.push(0);for(i[t>>>5]|=128<<24-t%32,i[o]=4294967295&h,i[o-1]=h/4294967296|0,s=0;s<i.length;s+=16)n=tt(i.slice(s,s+16),n);return n}class bt extends ${constructor(t,e,n){if(t!=="SHA-1")throw new Error(k);super(t,e,n);const s=n||{};this.L=!0,this.T=this.k,this.K=-1,this.m=T(this.t,this.i,this.K),this.R=tt,this.g=function(o){return o.slice()},this.B=gt,this.F=Et,this.C=[1732584193,4023233417,2562383102,271733878,3285377520],this.p=512,this.U=160,this.v=!1,s.hmacKey&&this.M(K("hmacKey",s.hmacKey,this.K))}}function et(i){let t;return t=i=="SHA-224"?R.slice():S.slice(),t}function nt(i,t){let e,n,s,o,h,w,c,a,p,f,u;const N=[];for(e=t[0],n=t[1],s=t[2],o=t[3],h=t[4],w=t[5],c=t[6],a=t[7],u=0;u<64;u+=1)N[u]=u<16?i[u]:Yt(C(A=N[u-2],17)^C(A,19)^J(A,10),N[u-7],mt(N[u-15]),N[u-16]),p=B(a,dt(h),W(h,w,c),l[u],N[u]),f=E(Nt(e),Z(e,n,s)),a=c,c=w,w=h,h=E(o,p),o=s,s=n,n=e,e=E(p,f);var A;return t[0]=E(e,t[0]),t[1]=E(n,t[1]),t[2]=E(s,t[2]),t[3]=E(o,t[3]),t[4]=E(h,t[4]),t[5]=E(w,t[5]),t[6]=E(c,t[6]),t[7]=E(a,t[7]),t}class vt extends ${constructor(t,e,n){if(t!=="SHA-224"&&t!=="SHA-256")throw new Error(k);super(t,e,n);const s=n||{};this.T=this.k,this.L=!0,this.K=-1,this.m=T(this.t,this.i,this.K),this.R=nt,this.g=function(o){return o.slice()},this.B=et,this.F=function(o,h,w,c){return function(a,p,f,u,N){let A,Y;const m=15+(p+65>>>9<<4),d=p+f;for(;a.length<=m;)a.push(0);for(a[p>>>5]|=128<<24-p%32,a[m]=4294967295&d,a[m-1]=d/4294967296|0,A=0;A<a.length;A+=16)u=nt(a.slice(A,A+16),u);return Y=N==="SHA-224"?[u[0],u[1],u[2],u[3],u[4],u[5],u[6]]:u,Y}(o,h,w,c,t)},this.C=et(t),this.p=512,this.U=t==="SHA-224"?224:256,this.v=!1,s.hmacKey&&this.M(K("hmacKey",s.hmacKey,this.K))}}class r{constructor(t,e){this.Y=t,this.N=e}}function st(i,t){let e;return t>32?(e=64-t,new r(i.N<<t|i.Y>>>e,i.Y<<t|i.N>>>e)):t!==0?(e=32-t,new r(i.Y<<t|i.N>>>e,i.N<<t|i.Y>>>e)):i}function U(i,t){let e;return t<32?(e=32-t,new r(i.Y>>>t|i.N<<e,i.N>>>t|i.Y<<e)):(e=64-t,new r(i.N>>>t|i.Y<<e,i.Y>>>t|i.N<<e))}function it(i,t){return new r(i.Y>>>t,i.N>>>t|i.Y<<32-t)}function Ht(i,t,e){return new r(i.Y&t.Y^i.Y&e.Y^t.Y&e.Y,i.N&t.N^i.N&e.N^t.N&e.N)}function Lt(i){const t=U(i,28),e=U(i,34),n=U(i,39);return new r(t.Y^e.Y^n.Y,t.N^e.N^n.N)}function H(i,t){let e,n;e=(65535&i.N)+(65535&t.N),n=(i.N>>>16)+(t.N>>>16)+(e>>>16);const s=(65535&n)<<16|65535&e;return e=(65535&i.Y)+(65535&t.Y)+(n>>>16),n=(i.Y>>>16)+(t.Y>>>16)+(e>>>16),new r((65535&n)<<16|65535&e,s)}function Ct(i,t,e,n){let s,o;s=(65535&i.N)+(65535&t.N)+(65535&e.N)+(65535&n.N),o=(i.N>>>16)+(t.N>>>16)+(e.N>>>16)+(n.N>>>16)+(s>>>16);const h=(65535&o)<<16|65535&s;return s=(65535&i.Y)+(65535&t.Y)+(65535&e.Y)+(65535&n.Y)+(o>>>16),o=(i.Y>>>16)+(t.Y>>>16)+(e.Y>>>16)+(n.Y>>>16)+(s>>>16),new r((65535&o)<<16|65535&s,h)}function Ut(i,t,e,n,s){let o,h;o=(65535&i.N)+(65535&t.N)+(65535&e.N)+(65535&n.N)+(65535&s.N),h=(i.N>>>16)+(t.N>>>16)+(e.N>>>16)+(n.N>>>16)+(s.N>>>16)+(o>>>16);const w=(65535&h)<<16|65535&o;return o=(65535&i.Y)+(65535&t.Y)+(65535&e.Y)+(65535&n.Y)+(65535&s.Y)+(h>>>16),h=(i.Y>>>16)+(t.Y>>>16)+(e.Y>>>16)+(n.Y>>>16)+(s.Y>>>16)+(o>>>16),new r((65535&h)<<16|65535&o,w)}function O(i,t){return new r(i.Y^t.Y,i.N^t.N)}function Rt(i){const t=U(i,19),e=U(i,61),n=it(i,6);return new r(t.Y^e.Y^n.Y,t.N^e.N^n.N)}function St(i){const t=U(i,1),e=U(i,8),n=it(i,7);return new r(t.Y^e.Y^n.Y,t.N^e.N^n.N)}function Kt(i){const t=U(i,14),e=U(i,18),n=U(i,41);return new r(t.Y^e.Y^n.Y,t.N^e.N^n.N)}const Tt=[new r(l[0],3609767458),new r(l[1],602891725),new r(l[2],3964484399),new r(l[3],2173295548),new r(l[4],4081628472),new r(l[5],3053834265),new r(l[6],2937671579),new r(l[7],3664609560),new r(l[8],2734883394),new r(l[9],1164996542),new r(l[10],1323610764),new r(l[11],3590304994),new r(l[12],4068182383),new r(l[13],991336113),new r(l[14],633803317),new r(l[15],3479774868),new r(l[16],2666613458),new r(l[17],944711139),new r(l[18],2341262773),new r(l[19],2007800933),new r(l[20],1495990901),new r(l[21],1856431235),new r(l[22],3175218132),new r(l[23],2198950837),new r(l[24],3999719339),new r(l[25],766784016),new r(l[26],2566594879),new r(l[27],3203337956),new r(l[28],1034457026),new r(l[29],2466948901),new r(l[30],3758326383),new r(l[31],168717936),new r(l[32],1188179964),new r(l[33],1546045734),new r(l[34],1522805485),new r(l[35],2643833823),new r(l[36],2343527390),new r(l[37],1014477480),new r(l[38],1206759142),new r(l[39],344077627),new r(l[40],1290863460),new r(l[41],3158454273),new r(l[42],3505952657),new r(l[43],106217008),new r(l[44],3606008344),new r(l[45],1432725776),new r(l[46],1467031594),new r(l[47],851169720),new r(l[48],3100823752),new r(l[49],1363258195),new r(l[50],3750685593),new r(l[51],3785050280),new r(l[52],3318307427),new r(l[53],3812723403),new r(l[54],2003034995),new r(l[55],3602036899),new r(l[56],1575990012),new r(l[57],1125592928),new r(l[58],2716904306),new r(l[59],442776044),new r(l[60],593698344),new r(l[61],3733110249),new r(l[62],2999351573),new r(l[63],3815920427),new r(3391569614,3928383900),new r(3515267271,566280711),new r(3940187606,3454069534),new r(4118630271,4000239992),new r(116418474,1914138554),new r(174292421,2731055270),new r(289380356,3203993006),new r(460393269,320620315),new r(685471733,587496836),new r(852142971,1086792851),new r(1017036298,365543100),new r(1126000580,2618297676),new r(1288033470,3409855158),new r(1501505948,4234509866),new r(1607167915,987167468),new r(1816402316,1246189591)];function rt(i){return i==="SHA-384"?[new r(3418070365,R[0]),new r(1654270250,R[1]),new r(2438529370,R[2]),new r(355462360,R[3]),new r(1731405415,R[4]),new r(41048885895,R[5]),new r(3675008525,R[6]),new r(1203062813,R[7])]:[new r(S[0],4089235720),new r(S[1],2227873595),new r(S[2],4271175723),new r(S[3],1595750129),new r(S[4],2917565137),new r(S[5],725511199),new r(S[6],4215389547),new r(S[7],327033209)]}function ot(i,t){let e,n,s,o,h,w,c,a,p,f,u,N;const A=[];for(e=t[0],n=t[1],s=t[2],o=t[3],h=t[4],w=t[5],c=t[6],a=t[7],u=0;u<80;u+=1)u<16?(N=2*u,A[u]=new r(i[N],i[N+1])):A[u]=Ct(Rt(A[u-2]),A[u-7],St(A[u-15]),A[u-16]),p=Ut(a,Kt(h),(m=w,d=c,new r((Y=h).Y&m.Y^~Y.Y&d.Y,Y.N&m.N^~Y.N&d.N)),Tt[u],A[u]),f=H(Lt(e),Ht(e,n,s)),a=c,c=w,w=h,h=H(o,p),o=s,s=n,n=e,e=H(p,f);var Y,m,d;return t[0]=H(e,t[0]),t[1]=H(n,t[1]),t[2]=H(s,t[2]),t[3]=H(o,t[3]),t[4]=H(h,t[4]),t[5]=H(w,t[5]),t[6]=H(c,t[6]),t[7]=H(a,t[7]),t}class yt extends ${constructor(t,e,n){if(t!=="SHA-384"&&t!=="SHA-512")throw new Error(k);super(t,e,n);const s=n||{};this.T=this.k,this.L=!0,this.K=-1,this.m=T(this.t,this.i,this.K),this.R=ot,this.g=function(o){return o.slice()},this.B=rt,this.F=function(o,h,w,c){return function(a,p,f,u,N){let A,Y;const m=31+(p+129>>>10<<5),d=p+f;for(;a.length<=m;)a.push(0);for(a[p>>>5]|=128<<24-p%32,a[m]=4294967295&d,a[m-1]=d/4294967296|0,A=0;A<a.length;A+=32)u=ot(a.slice(A,A+32),u);return Y=N==="SHA-384"?[(u=u)[0].Y,u[0].N,u[1].Y,u[1].N,u[2].Y,u[2].N,u[3].Y,u[3].N,u[4].Y,u[4].N,u[5].Y,u[5].N]:[u[0].Y,u[0].N,u[1].Y,u[1].N,u[2].Y,u[2].N,u[3].Y,u[3].N,u[4].Y,u[4].N,u[5].Y,u[5].N,u[6].Y,u[6].N,u[7].Y,u[7].N],Y}(o,h,w,c,t)},this.C=rt(t),this.p=1024,this.U=t==="SHA-384"?384:512,this.v=!1,s.hmacKey&&this.M(K("hmacKey",s.hmacKey,this.K))}}const Ft=[new r(0,1),new r(0,32898),new r(2147483648,32906),new r(2147483648,2147516416),new r(0,32907),new r(0,2147483649),new r(2147483648,2147516545),new r(2147483648,32777),new r(0,138),new r(0,136),new r(0,2147516425),new r(0,2147483658),new r(0,2147516555),new r(2147483648,139),new r(2147483648,32905),new r(2147483648,32771),new r(2147483648,32770),new r(2147483648,128),new r(0,32778),new r(2147483648,2147483658),new r(2147483648,2147516545),new r(2147483648,32896),new r(0,2147483649),new r(2147483648,2147516424)],Mt=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function x(i){let t;const e=[];for(t=0;t<5;t+=1)e[t]=[new r(0,0),new r(0,0),new r(0,0),new r(0,0),new r(0,0)];return e}function kt(i){let t;const e=[];for(t=0;t<5;t+=1)e[t]=i[t].slice();return e}function z(i,t){let e,n,s,o;const h=[],w=[];if(i!==null)for(n=0;n<i.length;n+=2)t[(n>>>1)%5][(n>>>1)/5|0]=O(t[(n>>>1)%5][(n>>>1)/5|0],new r(i[n+1],i[n]));for(e=0;e<24;e+=1){for(o=x(),n=0;n<5;n+=1)h[n]=(c=t[n][0],a=t[n][1],p=t[n][2],f=t[n][3],u=t[n][4],new r(c.Y^a.Y^p.Y^f.Y^u.Y,c.N^a.N^p.N^f.N^u.N));for(n=0;n<5;n+=1)w[n]=O(h[(n+4)%5],st(h[(n+1)%5],1));for(n=0;n<5;n+=1)for(s=0;s<5;s+=1)t[n][s]=O(t[n][s],w[n]);for(n=0;n<5;n+=1)for(s=0;s<5;s+=1)o[s][(2*n+3*s)%5]=st(t[n][s],Mt[n][s]);for(n=0;n<5;n+=1)for(s=0;s<5;s+=1)t[n][s]=O(o[n][s],new r(~o[(n+1)%5][s].Y&o[(n+2)%5][s].Y,~o[(n+1)%5][s].N&o[(n+2)%5][s].N));t[0][0]=O(t[0][0],Ft[e])}var c,a,p,f,u;return t}function ht(i){let t,e,n=0;const s=[0,0],o=[4294967295&i,i/4294967296&2097151];for(t=6;t>=0;t--)e=o[t>>2]>>>8*t&255,e===0&&n===0||(s[n+1>>2]|=e<<8*(n+1),n+=1);return n=n!==0?n:1,s[0]|=n,{value:n+1>4?s:[s[0]],binLen:8+8*n}}function j(i){return X(ht(i.binLen),i)}function ut(i,t){let e,n=ht(t);n=X(n,i);const s=t>>>2,o=(s-n.value.length%s)%s;for(e=0;e<o;e++)n.value.push(0);return n.value}class Bt extends ${constructor(t,e,n){let s=6,o=0;super(t,e,n);const h=n||{};if(this.numRounds!==1){if(h.kmacKey||h.hmacKey)throw new Error("Cannot set numRounds with MAC");if(this.s==="CSHAKE128"||this.s==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.K=1,this.m=T(this.t,this.i,this.K),this.R=z,this.g=kt,this.B=x,this.C=x(),this.v=!1,t){case"SHA3-224":this.p=o=1152,this.U=224,this.L=!0,this.T=this.k;break;case"SHA3-256":this.p=o=1088,this.U=256,this.L=!0,this.T=this.k;break;case"SHA3-384":this.p=o=832,this.U=384,this.L=!0,this.T=this.k;break;case"SHA3-512":this.p=o=576,this.U=512,this.L=!0,this.T=this.k;break;case"SHAKE128":s=31,this.p=o=1344,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"SHAKE256":s=31,this.p=o=1088,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"KMAC128":s=4,this.p=o=1344,this.I(n),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"KMAC256":s=4,this.p=o=1088,this.I(n),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"CSHAKE128":this.p=o=1344,s=this._(n),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"CSHAKE256":this.p=o=1088,s=this._(n),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;default:throw new Error(k)}this.F=function(w,c,a,p,f){return function(u,N,A,Y,m,d,L){let g,b,v=0;const F=[],I=m>>>5,at=N>>>5;for(g=0;g<at&&N>=m;g+=I)Y=z(u.slice(g,g+I),Y),N-=m;for(u=u.slice(g),N%=m;u.length<I;)u.push(0);for(g=N>>>3,u[g>>2]^=d<<g%4*8,u[I-1]^=2147483648,Y=z(u,Y);32*F.length<L&&(b=Y[v%5][v/5|0],F.push(b.N),!(32*F.length>=L));)F.push(b.Y),v+=1,64*v%m==0&&(z(null,Y),v=0);return F}(w,c,0,p,o,s,f)},h.hmacKey&&this.M(K("hmacKey",h.hmacKey,this.K))}_(t,e){const n=function(o){const h=o||{};return{funcName:K("funcName",h.funcName,1,{value:[],binLen:0}),customization:K("Customization",h.customization,1,{value:[],binLen:0})}}(t||{});e&&(n.funcName=e);const s=X(j(n.funcName),j(n.customization));if(n.customization.binLen!==0||n.funcName.binLen!==0){const o=ut(s,this.p>>>3);for(let h=0;h<o.length;h+=this.p>>>5)this.C=this.R(o.slice(h,h+(this.p>>>5)),this.C),this.l+=this.p;return 4}return 31}I(t){const e=function(s){const o=s||{};return{kmacKey:K("kmacKey",o.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:K("Customization",o.customization,1,{value:[],binLen:0})}}(t||{});this._(t,e.funcName);const n=ut(j(e.kmacKey),this.p>>>3);for(let s=0;s<n.length;s+=this.p>>>5)this.C=this.R(n.slice(s,s+(this.p>>>5)),this.C),this.l+=this.p;this.A=!0}X(t){const e=X({value:this.o.slice(),binLen:this.h},function(n){let s,o,h=0;const w=[0,0],c=[4294967295&n,n/4294967296&2097151];for(s=6;s>=0;s--)o=c[s>>2]>>>8*s&255,o===0&&h===0||(w[h>>2]|=o<<8*h,h+=1);return h=h!==0?h:1,w[h>>2]|=h<<8*h,{value:h+1>4?w:[w[0]],binLen:8+8*h}}(t.outputLen));return this.F(e.value,e.binLen,this.l,this.g(this.C),t.outputLen)}}class Ot{constructor(t,e,n){if(t=="SHA-1")this.O=new bt(t,e,n);else if(t=="SHA-224"||t=="SHA-256")this.O=new vt(t,e,n);else if(t=="SHA-384"||t=="SHA-512")this.O=new yt(t,e,n);else{if(t!="SHA3-224"&&t!="SHA3-256"&&t!="SHA3-384"&&t!="SHA3-512"&&t!="SHAKE128"&&t!="SHAKE256"&&t!="CSHAKE128"&&t!="CSHAKE256"&&t!="KMAC128"&&t!="KMAC256")throw new Error(k);this.O=new Bt(t,e,n)}}update(t){this.O.update(t)}getHash(t,e){return this.O.getHash(t,e)}setHMACKey(t,e,n){this.O.setHMACKey(t,e,n)}getHMAC(t,e){return this.O.getHMAC(t,e)}}const It=i=>{const t=new Date(i.getTime()+i.getTimezoneOffset()*60*1e3),[e,n,s,o,h,w]=t.toString().replace(/GMT.*/,"GMT").split(" ");return[`${e},`,s,n,o,h,w].join(" ")},Xt=i=>{const t=[`hmac username="${i.id}"`,'algorithm="hmac-sha1"','headers="x-date"'],e=new Ot("SHA-1","TEXT"),n=It(new Date);return e.setHMACKey(i.key,"TEXT"),e.update(`x-date: ${n}`),t.push(`signature="${e.getHMAC("B64")}"`),{Authorization:t.join(", "),"X-Date":n}},ct=(i,t)=>{let e=i;const n=["$format=JSON"];return Object.keys(t).forEach(s=>{/\$.*/.test(s)&&t[s]?n.push(`${s}=${t[s]}`):e=e.replace(`{${s}}`,t[s])}),`${e}?${n.join("&")}`};function xt(i){const t={base:"https://ptx.transportdata.tw/MOTC/v2",key:"QSFR98efYDoMg2t1unbWcMzQ0eg",id:"903c1f92725a4af7b0586fb98667322e"};return{request:(e,n)=>{const s=`${t.base}/${i}/${e}`,o=pt(ct(s,n)),{data:h,execute:w,isFetching:c,onFetchError:a,onFetchFinally:p}=At(o,{immediate:!1,beforeFetch:({options:f})=>(f.headers=M(M({},f.headers),Xt({key:t.key,id:t.id})),{options:f})}).json();return{data:h,execute:w,isFetching:c,onFetchError:a,onFetchFinally:p,reload:f=>{c.value||(o.value=ct(s,M(M({},n),f)),w())}}}}}export{xt as u};
